{% extends "admin/base.html.twig" %}

{% block title %}
    Dashboard
{% endblock %}

{% block stylesheet %}
{% endblock %}

{% block main %}
    <div class="container">
      {% include 'admin/_partials/nav2.html.twig' %}
      <h2 class="text-center">Gestion des membres</h2>
      <div class="divide20"></div>
        {{ message.display }}
      <div class="post box">
        <table class="table table-striped table-dark">
          <thead>
            <tr>
              <th scope="col">id</th>
              <th scope="col" style="width:10%;">avatar</th>
              <th scope="col">Pseudo</th>
              <th scope="col">Mail</th>
              <th scope="col">Role</th>
              <th scope="col">Date</th>
              <th scope="col">Actif</th>
              <th scope="col">Modifier</th>
              <th scope="col">Supprimer</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
              <tr>
                <th scope="row">{{ user.id }}</th>
                <td style="width:10%;">
                  {% if user.image %}
                  <img src="../assets/img/{{ user.image }}" alt="" style="width:50%;">
                  {% elseif user.image is null %}
                  <img src="../assets/img/avatardefaut.png" alt="" style="width:50%;">
                  {% endif %}
                </td>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>{{ (user.roles) ? 'Admin' : 'Membre' }}</td>
                <td>{{ user.created_at|date("m/d/Y") }}</td>
                <td>{{ (user.active) ? 'Oui' : 'Non' }}</td>
                <td><i class="fa fa-pencil" aria-hidden="true"></i></td>
                <td>
                  {% if (user.username != session.admin.username) %}
                    {% include('admin/_forms/userDelete.html.twig') %}
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="divide100"></div>
{% endblock %}

{% block js %}
{% endblock %}
